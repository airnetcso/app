<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Latihan Soal</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: auto; }
  .question { margin-bottom: 20px; }
  .options button { display: block; margin: 10px 0; padding: 10px; width: 100%; }
  #timer { font-size: 18px; margin-bottom: 20px; color: red; }
  #result { font-size: 20px; margin-top: 30px; text-align: center; }
  img { max-width: 100%; margin-bottom: 10px; }
</style>
</head>
<body>

<h2>Latihan Soal</h2>
<div id="timer">Waktu: 50:00</div>
<div id="quiz"></div>
<div id="result"></div>

<script>
const quizContainer = document.getElementById('quiz');
const resultContainer = document.getElementById('result');

let questions = [];
let currentQuestion = 0;
let score = 0;
let timer = 50 * 60; // 50 menit dalam detik

// Fetch soal JSON
fetch('https://airnetcso.github.io/app/soal.json')
  .then(res => res.json())
  .then(data => {
    questions = data;
    showQuestion();
    startTimer();
  })
  .catch(err => {
    quizContainer.innerHTML = 'Gagal memuat soal. Cek koneksi.';
  });

// Tampilkan soal
function showQuestion() {
  if(currentQuestion >= questions.length) {
    showResult();
    return;
  }
  const q = questions[currentQuestion];
  let html = '<div class="question">';
  
  // Teks soal
  if(q.type === 'text') html += `<p>${q.question}</p>`;
  
  // Soal gambar
  if(q.type === 'image') html += `<img src="${q.src}" alt="Soal Gambar"><p>${q.question}</p>`;
  
  // Soal audio
  if(q.type === 'audio') html += `<audio controls src="${q.src}"></audio><p>${q.question}</p>`;
  
  html += '</div><div class="options">';
  q.options.forEach((opt, i) => {
    html += `<button onclick="checkAnswer(${i})">${opt}</button>`;
  });
  html += '</div>';
  quizContainer.innerHTML = html;
}

// Cek jawaban
function checkAnswer(selected) {
  const q = questions[currentQuestion];
  if(selected === q.answer) score++;
  currentQuestion++;
  showQuestion();
}

// Tampilkan hasil
function showResult() {
  quizContainer.style.display = 'none';
  resultContainer.innerHTML = `Skor Anda: ${score} / ${questions.length}`;
}

// Timer countdown
function startTimer() {
  const timerEl = document.getElementById('timer');
  const interval = setInterval(() => {
    let minutes = Math.floor(timer / 60);
    let seconds = timer % 60;
    if(seconds < 10) seconds = '0' + seconds;
    timerEl.textContent = `Waktu: ${minutes}:${seconds}`;
    timer--;
    if(timer < 0) {
      clearInterval(interval);
      showResult();
    }
  }, 1000);
}
</script>

</body>
</html>
